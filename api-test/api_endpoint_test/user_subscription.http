@base_url = http://localhost:8000
@access_token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJBa2luZ2JlbmdhIiwiZXhwIjoxNzUxMjM1MTMwfQ.af-lNioD3eh0TRMxbmJ2HGZfwc08CzlNxQ8VDo-KX0Q
@stripe_signature =whsec_test_1234567890

### 0. Login for Access Token
# @name login_for_access_token
POST {{base_url}}/auth/token
Content-Type: application/x-www-form-urlencoded

username=**********&password=**********


### 1. Create a Checkout Session
# @name create_checkout_session
POST {{base_url}}/user_subscription/checkout
Content-Type: application/json
Authorization: Bearer {{access_token}}

{
    "plan_id": 2,
    "success_url": "https://example.com/success",
    "cancel_url": "https://example.com/cancel"
}

### 2. Create a Portal Session
# @name create_portal_session
POST {{base_url}}/user_subscription/portal
Content-Type: application/json
Authorization: Bearer {{access_token}}

{
    "return_url": "https://example.com/return"
}

### 3. Get My Subscription
# @name get_my_subscription
GET {{base_url}}/user_subscription/my-subscription
Authorization: Bearer {{access_token}}

### 4. Webhook for Stripe Events
# @name stripe_webhook
POST {{base_url}}/user_subscription/webhook
Content-Type: application/json
Stripe-Signature: {{stripe_signature}}



{
    "id": "evt_1J2Y3Z2eZvKYlo2C1g1g1g1g",
    "object": "event",
    "type": "checkout.session.completed",
    "data": {
        "object": {
            "id": "cs_test_a1b2c3d4e5f6g7h8i9j0",
            "customer": "cus_test123",
            "metadata": {
                "user_id": "1",
                "plan_id": "1"
            }
        }
    }
}

### 5. List All Subscriptions (Admin)
# @name list_all_subscriptions
GET {{base_url}}/user_subscription/subscriptions
Authorization: Bearer {{access_token}}

### 6. Get User Subscriptions by User ID (Admin)
# @name get_user_subscriptions
GET {{base_url}}/user_subscription/users/1/subscriptions
Authorization: Bearer {{access_token}} 